{{- $ctx := . -}}
{{- $curPage := .Page -}}
{{- /*
     * Use Hugo's native Table of contents feature. You must set `toc: true` in your parameters for this to show.
     * https://gohugo.io/content-management/toc/
     */ -}}
{{- if .Params.toc }}
            <div class="context-menu-item">
                <h2 class="context-title">{{ i18n "whatsInThis" . }}</h2>
                {{ .TableOfContents }}
            </div>
{{- end -}}
{{- $related := partial "helpers/return-pages-see-also" . -}}
{{- with $related }}
            <div class="context-menu-item">
                <h2 class="context-title">{{ i18n "related" }}</h2>
                <ul class="context-list">
    {{- range . -}}
        {{- $pageMetadata := partial "helpers/return-metadata" (dict "page" .Page "requestedData" (slice "title-page")) }}
                    <li class="context-list-item"><a href="{{ .RelPermalink }}">
                    {{- index $pageMetadata "title-page" -}}
                    </a></li>
    {{- end }}
                </ul>
            </div>
{{-  end -}}
{{- /* Remove trailing newlines */ -}}
