<!DOCTYPE html>
<html lang="{{ $.Site.LanguageCode | default "en" }}">
{{- $self_close := eq ( .Params.emptyElementStyle | default .Site.Params.emptyElementStyle ) "self-closing" }}
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,minimum-scale=1"{{ if $self_close }} /{{ end }}>
    {{- /* NOTE: the Site's title, and if there is a page title, that is set too */}}
    <title>
    {{- block "title" . -}}
        {{- $page_title_metadata := partial "helpers/return-metadata" (dict "page" .Page "requestedData" (slice "title-page" "title-site")) -}}
        {{- index $page_title_metadata "title-page" }}{{- if lt (len ((printf "%s | %s" (index $page_title_metadata "title-page") (index $page_title_metadata "title-site")) | htmlEscape)) 70 }} | {{ index $page_title_metadata "title-site" -}}{{ end -}}
    {{- end -}}
    </title>
    {{- /* NOTE: For Production make sure you add `HUGO_ENV="production"` before your build command */ -}}
    {{ if eq (getenv "HUGO_ENV") "production" | or (eq .Site.Params.env "production")  }}
    <meta name="robots" content="index, follow"{{ if $self_close }} /{{ end }}>
        {{- if and .Permalink (ne .Page.Params.notCanonical true) (or (eq (.Param "taxCanonical") true) (not (or (.Data.Singular) (.Data.Plural)))) }}
    <link rel="canonical" href="{{ .Permalink }}"{{ if $self_close }} /{{ end }}>
        {{- else if .Page.Params.toCanonical }}
    <link rel="canonical" href="{{ .Page.Params.toCanonical }}"{{ if $self_close }} /{{ end }}>
        {{- end }}
    {{- else }}
    <meta name="robots" content="noindex, nofollow"{{ if $self_close }} /{{ end }}>
        {{- if and .Permalink (ne .Page.Params.notCanonical true) (or (eq (.Param "taxCanonical") true) (not (or (.Data.Singular) (.Data.Plural)))) }}
    <link rel="alternate" data="will-be-canonical" href="{{ .Permalink }}"{{ if $self_close }} /{{ end }}>
        {{- else if .Page.Params.toCanonical }}
    <link rel="alternate" data="will-be-canonical" href="{{ .Page.Params.toCanonical }}"{{ if $self_close }} /{{ end }}>
        {{- end -}}
    {{- end }}
    {{- partial "site-style.html" . -}}
    {{- partial "site-scripts.html" . -}}
    {{ block "favicon" . }}
      {{- partialCached "site-favicon.html" . -}}
    {{ end }}
    {{- if .OutputFormats.Get "RSS" -}}
      {{- with .OutputFormats.Get "RSS" }}
    <link href="{{ .RelPermalink }}" rel="alternate" type="application/rss+xml" title="{{ $.Site.Title }}"{{ if $self_close }} /{{ end }}>
    <link href="{{ .RelPermalink }}" rel="feed" type="application/rss+xml" title="{{ $.Site.Title }}"{{ if $self_close }} /{{ end }}>
      {{- end -}}
    {{- end }}
    {{ partial "head/metadata" . -}}
    {{- if eq (getenv "HUGO_ENV") "production" | or (eq .Site.Params.env "production") -}}
      {{- template "_internal/google_analytics_async.html" . -}}
    {{- end -}}
  {{- block "head" . -}}
    {{- partial "head-additions.html" . -}}
  {{- end }}
  </head>
  <body class="ma0 {{ $.Param "body_classes" | default "avenir bg-light-gray"}}{{ with getenv "HUGO_ENV" }} {{ . }}{{ end }}">
  {{- block "header" . -}}
    {{- partial "site-header.html" . -}}
  {{- end }}
    <main class="pb7">
  {{- block "main" . }}
  {{- end }}
    </main>
  {{- block "footer" . }}
{{ partialCached "site-footer.html" . -}}
  {{- end }}
  </body>
</html>
