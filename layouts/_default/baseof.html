<!DOCTYPE html>
<html lang="{{ $.Site.LanguageCode | default "en" }}">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    {{- /* NOTE: the Site's title, and if there is a page title, that is set too */}}
    <title>
    {{- block "title" . -}}
        {{- if (partial "page-title" .) -}}
          {{- (partial "page-title" .) }}{{- if lt (len ((printf "%s | %s" (partial "page-title" .) (partial "site-title" .)) | htmlEscape)) 70 }} | {{ partial "site-title" . -}}{{ end -}}
        {{ else -}}
          {{- partial "site-title" . -}}
        {{ end -}}
    {{- end -}}
    </title>
    <meta name="description" content="{{ with .Description }}{{ . }}{{ else }}{{if .IsPage}}{{ .Summary }}{{ else }}{{ with .Site.Params.description }}{{ . }}{{ end }}{{ end }}{{ end }}">
    {{ replace hugo.Generator " /" "" | safeHTML }}
    {{- /* NOTE: For Production make sure you add `HUGO_ENV="production"` before your build command */ -}}
    {{ if eq (getenv "HUGO_ENV") "production" | or (eq .Site.Params.env "production")  }}
    <META NAME="ROBOTS" CONTENT="INDEX, FOLLOW">
        {{- if and .Permalink (ne .Page.Params.notCanonical true) (or (eq (.Param "taxCanonical") true) (not (or (.Data.Singular) (.Data.Plural)))) }}
    <link rel="canonical" href="{{ .Permalink }}">
        {{- else if .Page.Params.toCanonical }}
    <link rel="canonical" href="{{ .Page.Params.toCanonical }}">
        {{- end }}
    {{- else }}
    <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
        {{- if and .Permalink (ne .Page.Params.notCanonical true) (or (eq (.Param "taxCanonical") true) (not (or (.Data.Singular) (.Data.Plural)))) }}
    <link rel="alternate" data="will-be-canonical" href="{{ .Permalink }}">
        {{- else if .Page.Params.toCanonical }}
    <link rel="alternate" data="will-be-canonical" href="{{ .Page.Params.toCanonical }}">
        {{- end -}}
    {{- end }}
    {{- partial "site-style.html" . -}}
    {{- partial "site-scripts.html" . -}}
    {{ block "favicon" . }}
      {{- partialCached "site-favicon.html" . -}}
    {{ end }}
    {{- if .OutputFormats.Get "RSS" -}}
      {{- with .OutputFormats.Get "RSS" }}
    <link href="{{ .RelPermalink }}" rel="alternate" type="application/rss+xml" title="{{ $.Site.Title }}">
    <link href="{{ .RelPermalink }}" rel="feed" type="application/rss+xml" title="{{ $.Site.Title }}">
      {{- end -}}
    {{- end -}}
    {{- /* NOTE: These Hugo Internal Templates can be found starting at https://github.com/gohugoio/hugo/tree/master/tpl/tplimpl/embedded/templates */}}
    {{ template "_internal/opengraph.html" . -}}
    {{- template "_internal/schema.html" . }}
    {{ template "_internal/twitter_cards.html" . -}}
    {{- if eq (getenv "HUGO_ENV") "production" | or (eq .Site.Params.env "production") -}}
      {{- template "_internal/google_analytics_async.html" . -}}
    {{- end -}}
  {{- block "head" . -}}
    {{- partial "head-additions.html" . -}}
  {{- end }}
  </head>

  <body class="ma0 {{ $.Param "body_classes" | default "avenir bg-near-white"}}{{ with getenv "HUGO_ENV" }} {{ . }}{{ end }}">
    {{- block "header" . -}}{{- partial "site-header.html" . -}}{{- end }}
    <main class="pb7" role="main">
      {{- block "main" . }}{{ end }}
    </main>
    {{ block "footer" . }}{{ partialCached "site-footer.html" . }}{{ end }}
  </body>
</html>
