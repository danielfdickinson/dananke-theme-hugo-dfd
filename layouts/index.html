{{ define "main" }}
 <article class="cf ph3 ph5-l pv3 pv4-l f3 tc-l center measure-wide lh-copy {{ $.Param "text_color" | default "mid-gray" }}">
    {{ partial "handle-content" .Content }}
  </article>
  {{/* Define a section to pull recent posts from. For Hugo 0.20 this will default to the section with the most number of pages. */}}
  {{ $mainSections := site.Params.mainSections | default (slice "post") }}
  {{/* Create a variable with that section to use in multiple places. */}}
  {{ $sectionPages := where (where (where .Site.Pages "Section" "in" $mainSections) "Parent.Kind" "ne" "home") "Parent.Parent.Kind" "ne" "section" }}
  {{/* Check to see if the section is defined for ranging through it */}}
  {{ $n_posts := $.Param "recent_posts_number" | default 3 }}

    <div class="pa3 pa4-ns w-100 w-70-ns center">
      <section class="w-100 mw8">
        <h2 class="f1 flex-none">Recent Articles</h2>
  {{ range first $n_posts $sectionPages.ByPublishDate.Reverse }}
        <div class="relative w-100 mb4">
    {{ partial "summary-with-image.html" . }}
        </div>
  {{ end }}
      </section>
      </div>
{{ end }}
