{{ define "main" }}
    {{- $curPage := .Page -}}
    {{- $section := .Site.GetPage "section" .Section -}}
    {{- $page_metadata := partial "helpers/return-metadata" (dict "page" .Page "requestedData" (slice "title-page")) }}
    <article class="main-article">
        <header class="main-header">
        {{- partial "social-share.html" . -}}
        {{- if .Params.omit_header_text }}
            <h1 class="main-title">
            {{- index $page_metadata "title-page" -}}
            </h1>
        {{- else }}
            <h2 class="main-title main-article-title">
            {{- index $page_metadata "title-page" -}}
            </h2>
        {{- end }}
        {{- with .Params.author | default .Site.Params.author }}
            <p class="article-author">
                By <strong>
            {{- if reflect.IsSlice . -}}
                {{- delimit . ", " | $curPage.RenderString -}}
            {{- else }}
                {{- . | $curPage.RenderString -}}
            {{- end -}}
                </strong>
            </p>
        {{- end -}}
        {{- /* Hugo uses Go's date formatting is set by example. Here are two formats */ -}}
        {{- if not .PublishDate.IsZero }}
            <time class="article-timeinfo" {{ printf `datetime="%s"` (.PublishDate.Format "2006-01-02T15:04:05Z07:00") | safeHTMLAttr }}>
            {{- .PublishDate.Format (default "January 2, 2006" .Site.Params.date_format) -}}
            </time>
        {{- end -}}
        {{- /*
            Show "reading time" and "word count" but only if one of the following are true:
            1) A global config `params` value is set `show_reading_time = true`
            2) A section front matter value is set `show_reading_time = true`
            3) A page front matter value is set `show_reading_time = true`
        */ -}}
        {{- if (or (eq (.Param "readingTimeShow") true) (eq $section.Params.readingTimeShow true) )}}
            <span class="article-timeinfo"> - {{ i18n "readingTime" .ReadingTime }} </span>
            <span class="article-timeinfo"> - {{ i18n "wordCount" .WordCount }} </span>
        {{- end }}
        </header>
        <div class="main-article-content">
            {{ partial "handle-content" .Content }}
            {{- partial "tags.html" . }}
        </div>
        <aside class="main-article-context-menu">
        {{- partial "menu-contextual.html" . }}
        </aside>
    </article>
{{- end -}}
{{- /* Remove trailing newlines */ -}}
